var K=Object.defineProperty;var Y=(a,e,i)=>e in a?K(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var p=(a,e,i)=>(Y(a,typeof e!="symbol"?e+"":e,i),i);import{l as J,n as I,t as x,f as L,s as _,m as q,d as E,a as Q,b as W,c as X,e as G,g as m,r as F,o as Z,h as f,i as d,j as v,u as g,k as M,w as S,p as n,q as j,F as ee,v as te,x as se,y as P,z as ae,A as ne,B as ie,C as oe,D as V,E as re,G as le,V as ce}from"./vendor.4dcdac00.js";const ue=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}};ue();const de={mobilenet:"saved_model_style_js/model.json",inception:"saved_model_style_inception_js/model.json",separable:"saved_model_transformer_separable_js/model.json",original:"saved_model_transformer_js/model.json"},me=["./images/seaport.jpg","./images/towers.jpg","./images/sketch.jpg","./images/clouds.jpg","./images/red_circles.jpg","./images/bricks.jpg","./images/stripes.jpg","./images/udnie.jpg","./images/zigzag.jpg","./images/star.jpg","./images/rob.jpg"];class ge{constructor(){p(this,"styleNet");p(this,"transformNet");p(this,"modelCache");p(this,"msg");p(this,"styleRatio");this.modelCache={},this.styleRatio=.5,this.msg="start"}async init(){const e=await Promise.all([this.loadModel("mobilenet"),this.loadModel("separable")]);this.styleNet=e[0],this.transformNet=e[1]}async loadModel(e){return this.modelCache[e]||(this.modelCache[e]=await J(de[e])),this.modelCache[e]}async stylize(e,i,l,t){await I(),this.msg="Generating 100D style representation",await I();let s=x(()=>{var o;return(o=this.styleNet)==null?void 0:o.predict(L(e).toFloat().div(_(255)).expandDims())});if(!s)return;this.msg="Generating 100D identity style representation",await I();const c=await x(()=>{var o;return(o=this.styleNet)==null?void 0:o.predict(L(i).toFloat().div(_(255)).expandDims())});if(!c)return;const C=s;s=await x(()=>{const o=q(C,_(t)),z=q(c,_(1-t));return o.add(z)}),E(C),E(c),this.msg="Stylizing image...",await I();const k=await x(()=>{var o;return Q((o=this.transformNet)==null?void 0:o.predict([L(i).toFloat().div(_(255)).expandDims(),s]))});await W(k,l),E(s),E(k)}}const R=new ge,pe=X({id:"stylization",state:()=>({loading:!1,stylizing:!1,msg:"",contentImgSrc:"./images/golden_gate.jpg",styleImageIndex:0}),getters:{styleImages(){return me},styleImgSrc(){return this.styleImages[this.styleImageIndex]}},actions:{async ready(){this.loading=!0,await R.init(),this.loading=!1},async launch(a,e,i,l){this.stylizing=!0,await R.stylize(a,e,i,l),this.stylizing=!1}}});var he=(a,e)=>{for(const[i,l]of e)a[i]=l;return a};const b=a=>(ae("data-v-70c59db5"),a=a(),ne(),a),ye={class:"ai989"},_e=b(()=>n("article",null,[n("h1",null,"\u98CE\u683C\u8FC1\u79FB"),n("p",null,"\u52A0\u8F7D\u56FE\u7247\uFF0C\u7136\u540E\u9009\u62E9\u98CE\u683C\uFF0C\u7136\u540E\u8C03\u8282\u5F3A\u5EA6\uFF0C\u53EF\u4EE5\u751F\u6210\u6700\u7EC8\u98CE\u683C\u5316\u540E\u7684\u56FE\u7247")],-1)),fe=V("\u6A21\u578B\u52A0\u8F7D\u4E2D\u2026\u2026"),ve={key:1},be=b(()=>n("legend",null,"\u8BF7\u9009\u62E9\u539F\u59CB\u56FE\u7247",-1)),Ce=["src"],ke=b(()=>n("legend",null,"\u8BF7\u9009\u62E9\u98CE\u683C",-1)),we={class:"image-list"},Ie=["data-index","onClick"],xe=["src"],Ee=["src"],Fe=b(()=>n("legend",null,"\u6700\u7EC8\u56FE\u7247",-1)),Se=V("\u751F\u6210\u4E2D\u2026\u2026"),je=V("\u751F\u6210"),ze=b(()=>n("img",null,null,-1)),Ae=ie('<fieldset data-v-70c59db5><legend data-v-70c59db5>\u53C2\u8003\u6587\u732E</legend><h2 data-v-70c59db5><a href="https://arxiv.org/abs/1508.06576" target="_blank" data-v-70c59db5>A Neural Algorithm of Artistic Style</a></h2><h3 data-v-70c59db5><span class="descriptor" data-v-70c59db5>Authors:</span><a href="https://arxiv.org/search/cs?searchtype=author&amp;query=Gatys%2C+L+A" target="_blank" data-v-70c59db5>Leon A. Gatys</a>, <a href="https://arxiv.org/search/cs?searchtype=author&amp;query=Ecker%2C+A+S" target="_blank" data-v-70c59db5>Alexander S. Ecker</a>, <a href="https://arxiv.org/search/cs?searchtype=author&amp;query=Bethge%2C+M" target="_blank" data-v-70c59db5>Matthias Bethge</a></h3><p data-v-70c59db5>In fine art, especially painting, humans have mastered the skill to create unique visual experiences through composing a complex interplay between the content and style of an image. Thus far the algorithmic basis of this process is unknown and there exists no artificial system with similar capabilities. However, in other key areas of visual perception such as object and face recognition near-human performance was recently demonstrated by a class of biologically inspired vision models called Deep Neural Networks. Here we introduce an artificial system based on a Deep Neural Network that creates artistic images of high perceptual quality. The system uses neural representations to separate and recombine content and style of arbitrary images, providing a neural algorithm for the creation of artistic images. Moreover, in light of the striking similarities between performance-optimised artificial neural networks and biological vision, our work offers a path forward to an algorithmic understanding of how humans create and perceive artistic imagery.</p></fieldset>',1),Ne=G({setup(a){const e=pe();function i(h){const y=new FileReader;y.onload=w=>{e.contentImgSrc=w.target.result},y.readAsDataURL(h.file)}function l(h){e.styleImageIndex=parseInt(h.currentTarget.dataset.index)}const t=m(()=>e.msg),s=m(()=>e.loading),c=m(()=>e.stylizing),C=m(()=>e.styleImages),k=m(()=>e.styleImageIndex),o=m(()=>e.contentImgSrc),z=m(()=>e.styleImgSrc),A=F(),N=F(),B=F(),D=F(.9);function O(h){A.value&&N.value&&B.value&&e.launch(A.value,N.value,B.value,D.value)}return Z(()=>{e.ready()}),(h,y)=>{const w=f("van-loading"),T=f("van-uploader"),H=f("van-slider"),U=f("van-field"),$=f("van-button");return d(),v("div",ye,[_e,g(s)?(d(),M(w,{key:0,type:"spinner"},{default:S(()=>[fe]),_:1})):(d(),v("div",ve,[n("fieldset",null,[be,j(T,{"after-read":i}),n("div",null,[n("img",{ref:(r,u)=>{u.contentImg=r,N.value=r},src:g(o),class:"style-img",crossorigin:"anonymous"},null,8,Ce)])]),n("fieldset",null,[ke,n("ul",we,[(d(!0),v(ee,null,te(g(C),(r,u)=>(d(),v("li",{class:oe({active:u==g(k)}),"data-index":u,onClick:P(l,["stop"])},[n("img",{src:r},null,8,xe)],10,Ie))),256))]),n("div",null,[n("img",{ref:(r,u)=>{u.styleImg=r,A.value=r},src:g(z),class:"style-img",crossorigin:"anonymous"},null,8,Ee)])]),n("fieldset",null,[Fe,n("div",null,se(g(t)),1),n("canvas",{ref:(r,u)=>{u.stylizedImg=r,B.value=r},class:"style-img"},null,512),j(U,{name:"slider",label:"\u5F3A\u5EA6"},{input:S(()=>[j(H,{modelValue:D.value,"onUpdate:modelValue":y[0]||(y[0]=r=>D.value=r),min:0,max:1,step:.001},null,8,["modelValue","step"])]),_:1}),g(c)?(d(),M(w,{key:0,type:"spinner"},{default:S(()=>[Se]),_:1})):(d(),M($,{key:1,type:"primary",onClick:P(O,["stop"])},{default:S(()=>[je]),_:1},8,["onClick"])),ze])])),Ae])}}});var Be=he(Ne,[["__scopeId","data-v-70c59db5"]]);const De=G({setup(a){return(e,i)=>(d(),v("div",null,[j(Be)]))}});re(De).use(le()).use(ce).mount("#app");
